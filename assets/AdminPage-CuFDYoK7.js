import{c as $,j as e,e as Ue,r as i,t as r,g as ze,U as Le,N as Re,b as d,h as Ee,B as c,W as $e,s as je}from"./index-Cn_29fsw.js";import{C as m,b as j,c as u,a as p,d as _,L as v}from"./card-CiSmHLqO.js";import{T as We,a as qe,b as T,c as P}from"./tabs-Cbw-3pQ0.js";import{T as L,a as R,b as f,c as n,d as E,e as t}from"./table-C7D8WiKu.js";import{D as K,b as Q,c as X,d as Y,e as Z}from"./dialog-GkPnYrhR.js";import{L as x,I as C}from"./label-D50YiGBT.js";import{i as Be,m as Oe,n as Ve,o as Ie,a as Ge,q as ue,b as Je,r as Ke,s as Qe,t as pe,v as Xe,w as Ye,x as Ze}from"./api-mmq8av95.js";import{M as es}from"./megaphone-CNxqS_4A.js";import{T as ss}from"./trending-up-BXP6tqRd.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],ts=$("file-check",as);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],rs=$("pencil",ns);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],is=$("plus",ls);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ds=$("trash-2",cs);function ge({className:y,...W}){return e.jsx("textarea",{"data-slot":"textarea",className:Ue("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",y),...W})}function fs(){const[y,W]=i.useState([]),[q,ve]=i.useState([]),[B,fe]=i.useState([]),[A,ee]=i.useState(!0),[h,b]=i.useState({open:!1,type:null,id:null,action:null}),[O,H]=i.useState(""),[F,M]=i.useState(!1),[se,ae]=i.useState(""),[k,te]=i.useState(""),[ne,re]=i.useState(!1),[o,S]=i.useState(null),[Ne,U]=i.useState(!1),[D,le]=i.useState("auto"),[ye,be]=i.useState(.01),[z,ie]=i.useState(""),[ce,de]=i.useState(!1),[oe,we]=i.useState([]),[l,g]=i.useState({open:!1,mode:"create",data:{}}),[xe,he]=i.useState(!1);i.useEffect(()=>{w(),_e(),V()},[]);const _e=async()=>{const s=await Be("developer_usdt_address");s&&(ae(s),te(s))},w=async()=>{ee(!0);try{const[s,a,N]=await Promise.all([Oe(),Ve(),Ie()]);W(s),ve(a),fe(N);try{const J=await Ge(!1);we(J)}catch(J){console.error("Failed to load announcements (table might be missing):",J)}}catch(s){console.error("Failed to load admin data:",s),r.error("加载数据失败，请检查网络或权限")}finally{ee(!1)}},Ce=async(s,a)=>{await Ke(s,a)?(r.success("角色更新成功"),await w()):r.error("角色更新失败")},ke=async()=>{if(!(!h.id||!h.action)){if(h.action==="reject"&&!O.trim()){r.error("请填写拒绝原因");return}M(!0),h.type==="withdrawal"&&(await Qe(h.id,h.action==="approve"?"approved":"rejected",h.action==="reject"?O:void 0)?(r.success(h.action==="approve"?"提币申请已通过":"提币申请已拒绝"),await w(),b({open:!1,type:null,id:null,action:null}),H("")):r.error("操作失败")),M(!1)}},Se=async()=>{if(!k.trim()){r.error("请输入有效的钱包地址");return}re(!0);const{error:s}=await je.from("platform_config").update({config_value:k}).eq("config_key","developer_usdt_address");re(!1),s?r.error("更新失败"):(r.success("开发者地址更新成功"),ae(k))},V=async()=>{const s=await ue("htp_price_mode");le(s||"auto");const a=await Je();if(be(a),s==="manual"){const N=await ue("htp_price");ie(N||"")}},me=async s=>{await pe("htp_price_mode",s)?(le(s),r.success(`已切换到${s==="auto"?"自动":"手动"}模式`),await V()):r.error("切换失败")},De=async()=>{const s=parseFloat(z);if(isNaN(s)||s<=0){r.error("请输入有效的价格");return}de(!0);const a=await pe("htp_price",s.toString());de(!1),a?(r.success("HTP价格更新成功"),await V()):r.error("更新失败")},Te=s=>{S({...s}),U(!0)},Pe=async()=>{if(!o)return;M(!0);const{error:s}=await je.from("profiles").update({htp_balance:o.htp_balance,usdt_balance:o.usdt_balance,wallet_activated:o.wallet_activated,role:o.role}).eq("id",o.id);M(!1),s?r.error("更新失败"):(r.success("用户信息更新成功"),U(!1),await w())},I=q.filter(s=>s.status==="pending"),G=B.filter(s=>s.status==="pending"),Ae=()=>{g({open:!0,mode:"create",data:{is_active:!0,priority:"normal"}})},He=s=>{g({open:!0,mode:"edit",data:s})},Fe=async s=>{if(!confirm("确定要删除这条公告吗？"))return;await Xe(s)?(r.success("公告已删除"),w()):r.error("删除失败")},Me=async()=>{if(!l.data.title||!l.data.content){r.error("请填写标题和内容");return}he(!0);let s=!1;if(l.mode==="create")s=await Ye({title:l.data.title,content:l.data.content,is_active:l.data.is_active??!0,priority:l.data.priority||"normal"});else{if(!l.data.id)return;s=await Ze(l.data.id,{title:l.data.title,content:l.data.content,is_active:l.data.is_active,priority:l.data.priority})}he(!1),s?(r.success(l.mode==="create"?"公告发布成功":"公告更新成功"),g(a=>({...a,open:!1})),w()):r.error("操作失败")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold gradient-text flex items-center gap-2",children:[e.jsx(ze,{className:"w-8 h-8"}),"管理后台 (v1.2)"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"管理用户、审核申请和查看统计数据"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(m,{className:"glow-border",children:[e.jsx(j,{className:"pb-2",children:e.jsxs(u,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"总用户数"]})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold",children:y.length})})]}),e.jsxs(m,{className:"glow-border",children:[e.jsx(j,{className:"pb-2",children:e.jsxs(u,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4"}),"待审核提币"]})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:I.length})})]}),e.jsxs(m,{className:"glow-border",children:[e.jsx(j,{className:"pb-2",children:e.jsxs(u,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),"待审核主节点"]})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:G.length})})]}),e.jsxs(m,{className:"glow-border",children:[e.jsx(j,{className:"pb-2",children:e.jsx(u,{className:"text-sm font-medium",children:"主节点数量"})}),e.jsx(p,{children:e.jsx("div",{className:"text-2xl font-bold text-primary",children:y.filter(s=>s.is_master_node).length})})]})]}),e.jsxs(We,{defaultValue:"announcements",className:"space-y-4",children:[e.jsxs(qe,{children:[e.jsxs(T,{value:"announcements",children:[e.jsx(es,{className:"w-4 h-4 mr-2"}),"公告中心 (New)"]}),e.jsx(T,{value:"users",children:"用户管理"}),e.jsxs(T,{value:"withdrawals",children:["提币审核",I.length>0&&e.jsx(d,{variant:"destructive",className:"ml-2",children:I.length})]}),e.jsxs(T,{value:"masternodes",children:["主节点审核",G.length>0&&e.jsx(d,{variant:"destructive",className:"ml-2",children:G.length})]}),e.jsxs(T,{value:"settings",children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"开发者设置"]})]}),e.jsx(P,{value:"users",children:e.jsxs(m,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"用户列表"}),e.jsx(_,{children:"管理所有用户的角色和权限"})]}),e.jsx(p,{children:A?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(v,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(f,{children:[e.jsx(n,{children:"用户名"}),e.jsx(n,{children:"HTP余额"}),e.jsx(n,{children:"USDT余额"}),e.jsx(n,{children:"邀请人数"}),e.jsx(n,{children:"钱包状态"}),e.jsx(n,{children:"注册时间"}),e.jsx(n,{children:"角色"}),e.jsx(n,{className:"text-right",children:"操作"})]})}),e.jsx(E,{children:y.map(s=>e.jsxs(f,{children:[e.jsx(t,{className:"font-medium",children:s.username}),e.jsx(t,{children:s.htp_balance.toFixed(2)}),e.jsx(t,{children:s.usdt_balance.toFixed(2)}),e.jsx(t,{children:s.total_invites}),e.jsx(t,{children:s.wallet_activated?e.jsx(d,{variant:"secondary",className:"bg-green-500/10 text-green-500",children:"已激活"}):e.jsx(d,{variant:"secondary",className:"bg-gray-500/10 text-gray-500",children:"未激活"})}),e.jsx(t,{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("zh-CN")}),e.jsxs(t,{children:[s.role==="admin"&&e.jsx(d,{variant:"secondary",className:"bg-red-500/10 text-red-500",children:"管理员"}),s.role==="master_node"&&e.jsx(d,{variant:"secondary",className:"bg-primary/10 text-primary",children:"主节点"}),s.role==="user"&&e.jsx(d,{variant:"secondary",children:"普通用户"})]}),e.jsx(t,{className:"text-right space-x-2",children:e.jsx(c,{size:"sm",variant:"outline",onClick:()=>Te(s),children:"编辑"})})]},s.id))})]})})})]})}),e.jsx(P,{value:"withdrawals",children:e.jsxs(m,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"提币审核"}),e.jsx(_,{children:"审核用户的提币申请"})]}),e.jsx(p,{children:A?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(v,{className:"w-8 h-8 animate-spin text-primary"})}):q.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"暂无提币申请"}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(f,{children:[e.jsx(n,{children:"用户"}),e.jsx(n,{children:"代币"}),e.jsx(n,{className:"text-right",children:"数量"}),e.jsx(n,{children:"接收地址"}),e.jsx(n,{children:"付款地址"}),e.jsx(n,{children:"申请时间"}),e.jsx(n,{children:"状态"}),e.jsx(n,{className:"text-right",children:"操作"})]})}),e.jsx(E,{children:q.map(s=>{const a=y.find(N=>N.id===s.user_id);return e.jsxs(f,{children:[e.jsx(t,{className:"font-medium",children:(a==null?void 0:a.username)||"未知用户"}),e.jsx(t,{children:e.jsx(d,{variant:"outline",children:s.token_type})}),e.jsx(t,{className:"text-right font-bold",children:s.amount.toFixed(2)}),e.jsxs(t,{className:"font-mono text-xs",children:[s.to_address.slice(0,10),"..."]}),e.jsx(t,{className:"font-mono text-xs",children:s.payment_address?s.payment_address.slice(0,10)+"...":"-"}),e.jsx(t,{className:"text-sm",children:new Date(s.created_at).toLocaleString("zh-CN")}),e.jsxs(t,{children:[s.status==="pending"&&e.jsx(d,{variant:"secondary",className:"bg-yellow-500/10 text-yellow-500",children:"待审核"}),s.status==="approved"&&e.jsx(d,{variant:"secondary",className:"bg-green-500/10 text-green-500",children:"已通过"}),s.status==="rejected"&&e.jsx(d,{variant:"secondary",className:"bg-red-500/10 text-red-500",children:"已拒绝"})]}),e.jsx(t,{className:"text-right",children:s.status==="pending"&&e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(c,{size:"sm",variant:"default",onClick:()=>b({open:!0,type:"withdrawal",id:s.id,action:"approve"}),children:"通过"}),e.jsx(c,{size:"sm",variant:"destructive",onClick:()=>b({open:!0,type:"withdrawal",id:s.id,action:"reject"}),children:"拒绝"})]})})]},s.id)})})]})})})]})}),e.jsx(P,{value:"masternodes",children:e.jsxs(m,{children:[e.jsxs(j,{children:[e.jsx(u,{children:"主节点审核"}),e.jsx(_,{children:"审核用户的主节点申请"})]}),e.jsx(p,{children:A?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(v,{className:"w-8 h-8 animate-spin text-primary"})}):B.length===0?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"暂无主节点申请"}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(f,{children:[e.jsx(n,{children:"用户"}),e.jsx(n,{children:"申请时间"}),e.jsx(n,{children:"目标"}),e.jsx(n,{children:"进度"}),e.jsx(n,{children:"状态"}),e.jsx(n,{className:"text-right",children:"操作"})]})}),e.jsx(E,{children:B.map(s=>{const a=y.find(N=>N.id===s.user_id);return e.jsxs(f,{children:[e.jsx(t,{className:"font-medium",children:(a==null?void 0:a.username)||"未知用户"}),e.jsx(t,{className:"text-sm",children:new Date(s.applied_at).toLocaleString("zh-CN")}),e.jsx(t,{children:s.target_wallets.toLocaleString()}),e.jsx(t,{children:s.activated_wallets.toLocaleString()}),e.jsxs(t,{children:[s.status==="pending"&&e.jsx(d,{variant:"secondary",className:"bg-yellow-500/10 text-yellow-500",children:"待审核"}),s.status==="approved"&&e.jsx(d,{variant:"secondary",className:"bg-green-500/10 text-green-500",children:"已通过"}),s.status==="rejected"&&e.jsx(d,{variant:"secondary",className:"bg-red-500/10 text-red-500",children:"已拒绝"})]}),e.jsx(t,{className:"text-right",children:s.status==="pending"&&e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(c,{size:"sm",variant:"default",onClick:async()=>{await Ce(s.user_id,"master_node"),r.success("主节点申请已通过")},children:"通过"}),e.jsx(c,{size:"sm",variant:"destructive",onClick:()=>b({open:!0,type:"masternode",id:s.id,action:"reject"}),children:"拒绝"})]})})]},s.id)})})]})})})]})}),e.jsx(P,{value:"announcements",className:"space-y-4",children:e.jsxs(m,{children:[e.jsxs(j,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{children:"公告管理"}),e.jsx(_,{children:"发布和管理系统公告"})]}),e.jsxs(c,{onClick:Ae,className:"hover-glow",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"发布公告"]})]}),e.jsx(p,{children:A?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(v,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs(L,{children:[e.jsx(R,{children:e.jsxs(f,{children:[e.jsx(n,{children:"标题"}),e.jsx(n,{children:"优先级"}),e.jsx(n,{children:"状态"}),e.jsx(n,{children:"发布时间"}),e.jsx(n,{className:"text-right",children:"操作"})]})}),e.jsxs(E,{children:[oe.map(s=>e.jsxs(f,{children:[e.jsx(t,{className:"font-medium",children:s.title}),e.jsx(t,{children:e.jsx(d,{variant:s.priority==="high"?"destructive":s.priority==="low"?"secondary":"default",children:s.priority==="high"?"重要":s.priority==="low"?"低":"普通"})}),e.jsx(t,{children:s.is_active?e.jsx(d,{className:"bg-green-500 hover:bg-green-600",children:"已发布"}):e.jsx(d,{variant:"outline",className:"text-muted-foreground",children:"草稿/下架"})}),e.jsx(t,{children:new Date(s.created_at).toLocaleString("zh-CN")}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>He(s),children:e.jsx(rs,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>Fe(s.id),children:e.jsx(ds,{className:"w-4 h-4"})})]})})]},s.id)),oe.length===0&&e.jsx(f,{children:e.jsx(t,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"暂无公告"})})]})]})})]})}),e.jsx(P,{value:"settings",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(m,{children:[e.jsxs(j,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"开发者钱包地址管理"]}),e.jsx(_,{children:"管理接收USDT的开发者钱包地址（仅管理员可修改）"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"当前开发者地址"}),e.jsx("div",{className:"p-3 rounded-lg bg-accent/30 border border-border",children:e.jsx("p",{className:"font-mono text-sm break-all",children:se})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"newAddress",children:"新的开发者地址"}),e.jsx(C,{id:"newAddress",placeholder:"输入新的BSC钱包地址",value:k,onChange:s=>te(s.target.value),className:"font-mono"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"此地址用于接收用户支付的钱包激活费用（30 USDT）"})]}),e.jsxs(c,{onClick:Se,disabled:ne||k===se,className:"w-full hover-glow",children:[ne&&e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"更新开发者地址"]})]})]}),e.jsxs(m,{children:[e.jsxs(j,{children:[e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"HTP价格管理"]}),e.jsx(_,{children:"根据市场需求调整HTP代币的显示价格"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"价格模式"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:D==="auto"?"default":"outline",onClick:()=>me("auto"),className:"flex-1",children:"自动计算"}),e.jsx(c,{variant:D==="manual"?"default":"outline",onClick:()=>me("manual"),className:"flex-1",children:"手动设置"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:D==="auto"?"自动模式：开盘价$0.01，每天递增$0.03":"手动模式：由管理员设置固定价格"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"当前HTP价格"}),e.jsx("div",{className:"p-3 rounded-lg bg-accent/30 border border-border",children:e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",ye.toFixed(4)]})})]}),D==="manual"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"newPrice",children:"设置新价格（美元）"}),e.jsx(C,{id:"newPrice",type:"number",step:"0.0001",min:"0",placeholder:"输入新的HTP价格",value:z,onChange:s=>ie(s.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"设置后将立即生效，影响所有用户看到的HTP价格"})]}),D==="manual"&&e.jsxs(c,{onClick:De,disabled:ce||!z||parseFloat(z)<=0,className:"w-full hover-glow",children:[ce&&e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"更新HTP价格"]})]})]})]})})]}),e.jsx(K,{open:h.open,onOpenChange:s=>{s||(b({open:!1,type:null,id:null,action:null}),H(""))},children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:h.action==="approve"?"确认通过":"确认拒绝"}),e.jsx(Z,{children:h.action==="approve"?"确认通过此申请吗？":"请填写拒绝原因"})]}),h.action==="reject"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"reject-reason",children:"拒绝原因"}),e.jsx(ge,{id:"reject-reason",placeholder:"请输入拒绝原因...",value:O,onChange:s=>H(s.target.value),rows:4})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(c,{variant:"outline",onClick:()=>{b({open:!1,type:null,id:null,action:null}),H("")},children:"取消"}),e.jsxs(c,{onClick:ke,disabled:F,variant:h.action==="approve"?"default":"destructive",children:[F&&e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"确认"]})]})]})}),e.jsx(K,{open:Ne,onOpenChange:U,children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:"编辑用户信息"}),e.jsx(Z,{children:"修改用户的余额、钱包状态和角色权限"})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"用户名"}),e.jsx(C,{value:o.username,disabled:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"htp_balance",children:"HTP余额"}),e.jsx(C,{id:"htp_balance",type:"number",step:"0.01",value:o.htp_balance,onChange:s=>S({...o,htp_balance:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"usdt_balance",children:"USDT余额"}),e.jsx(C,{id:"usdt_balance",type:"number",step:"0.01",value:o.usdt_balance,onChange:s=>S({...o,usdt_balance:parseFloat(s.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"role",children:"用户角色"}),e.jsxs("select",{id:"role",value:o.role,onChange:s=>S({...o,role:s.target.value}),className:"w-full border rounded px-3 py-2 bg-background",children:[e.jsx("option",{value:"user",children:"普通用户"}),e.jsx("option",{value:"master_node",children:"主节点"}),e.jsx("option",{value:"admin",children:"管理员"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"wallet_activated",checked:o.wallet_activated,onChange:s=>S({...o,wallet_activated:s.target.checked}),className:"w-4 h-4"}),e.jsx(x,{htmlFor:"wallet_activated",className:"cursor-pointer",children:"钱包已激活"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(c,{variant:"outline",onClick:()=>U(!1),children:"取消"}),e.jsxs(c,{onClick:Pe,disabled:F,children:[F&&e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"保存"]})]})]})]})}),e.jsx(K,{open:l.open,onOpenChange:s=>g(a=>({...a,open:s})),children:e.jsxs(Q,{children:[e.jsxs(X,{children:[e.jsx(Y,{children:l.mode==="create"?"发布新公告":"编辑公告"}),e.jsx(Z,{children:"公告发布后所有用户可见"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"标题"}),e.jsx(C,{placeholder:"请输入公告标题",value:l.data.title||"",onChange:s=>g(a=>({...a,data:{...a.data,title:s.target.value}}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"内容"}),e.jsx(ge,{placeholder:"请输入公告内容",className:"min-h-[150px]",value:l.data.content||"",onChange:s=>g(a=>({...a,data:{...a.data,content:s.target.value}}))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{children:"优先级"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:l.data.priority||"normal",onChange:s=>g(a=>({...a,data:{...a.data,priority:s.target.value}})),children:[e.jsx("option",{value:"low",children:"低"}),e.jsx("option",{value:"normal",children:"普通"}),e.jsx("option",{value:"high",children:"重要"})]})]}),e.jsx("div",{className:"space-y-2 flex flex-col justify-end pb-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-primary focus:ring-primary",checked:l.data.is_active??!0,onChange:s=>g(a=>({...a,data:{...a.data,is_active:s.target.checked}}))}),e.jsx("span",{className:"text-sm font-medium",children:"立即发布"})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(c,{variant:"outline",onClick:()=>g(s=>({...s,open:!1})),children:"取消"}),e.jsxs(c,{onClick:Me,disabled:xe,children:[xe&&e.jsx(v,{className:"w-4 h-4 mr-2 animate-spin"}),l.mode==="create"?"发布":"保存"]})]})]})}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground py-4",children:["Admin Panel v1.2.0 - Deploy: ",new Date().toLocaleDateString()]})]})}export{fs as default};
