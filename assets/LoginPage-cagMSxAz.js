import{r as m,u as C,l as L,m as F,j as e,S as T,B as j,t}from"./index-DNqCSPro.js";import{L as l,I as n}from"./label-CENJOLBV.js";import{C as S,b as P,c as D,d as I,a as B}from"./card-CrNedU7s.js";import{T as R,a as k,b as f,c as w}from"./tabs-C__dxLqa.js";import{L as v}from"./loader-circle-DGcJ5svm.js";function Z(){var g;const[r,d]=m.useState(!1),[i,u]=m.useState({username:"",password:""}),[s,c]=m.useState({username:"",password:"",confirmPassword:"",invitationCode:""}),{signIn:p,signUp:b}=C(),h=L(),x=((g=F().state)==null?void 0:g.from)||"/",y=async a=>{if(a.preventDefault(),!i.username||!i.password){t.error("请填写用户名和密码");return}d(!0);const{error:o}=await p(i.username,i.password);d(!1),o?t.error("登录失败："+o.message):(t.success("登录成功！"),h(x,{replace:!0}))},N=async a=>{if(a.preventDefault(),!s.username||!s.password){t.error("请填写用户名和密码");return}if(s.password!==s.confirmPassword){t.error("两次输入的密码不一致");return}if(s.password.length<6){t.error("密码长度至少为6位");return}if(!/^[a-zA-Z0-9_]+$/.test(s.username)){t.error("用户名只能包含字母、数字和下划线");return}d(!0);const{error:o}=await b(s.username,s.password,s.invitationCode||void 0);d(!1),o?t.error("注册失败："+o.message):(t.success("注册成功！正在登录..."),setTimeout(async()=>{await p(s.username,s.password),h(x,{replace:!0})},1e3))};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-chart-3/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs(S,{className:"w-full max-w-md relative z-10 glow-border",children:[e.jsxs(P,{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(T,{className:"w-12 h-12 text-primary"})}),e.jsx(D,{className:"text-3xl font-bold gradient-text",children:"HTP挖矿平台"}),e.jsx(I,{children:"基于BSC区块链的去中心化挖矿平台"})]}),e.jsx(B,{children:e.jsxs(R,{defaultValue:"login",className:"w-full",children:[e.jsxs(k,{className:"grid w-full grid-cols-2",children:[e.jsx(f,{value:"login",children:"登录"}),e.jsx(f,{value:"register",children:"注册"})]}),e.jsx(w,{value:"login",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-username",children:"用户名"}),e.jsx(n,{id:"login-username",type:"text",placeholder:"请输入用户名",value:i.username,onChange:a=>u({...i,username:a.target.value}),disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-password",children:"密码"}),e.jsx(n,{id:"login-password",type:"password",placeholder:"请输入密码",value:i.password,onChange:a=>u({...i,password:a.target.value}),disabled:r})]}),e.jsxs(j,{type:"submit",className:"w-full hover-glow",disabled:r,children:[r&&e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"登录"]})]})}),e.jsx(w,{value:"register",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-username",children:"用户名"}),e.jsx(n,{id:"register-username",type:"text",placeholder:"字母、数字、下划线",value:s.username,onChange:a=>c({...s,username:a.target.value}),disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-password",children:"密码"}),e.jsx(n,{id:"register-password",type:"password",placeholder:"至少6位",value:s.password,onChange:a=>c({...s,password:a.target.value}),disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-confirm-password",children:"确认密码"}),e.jsx(n,{id:"register-confirm-password",type:"password",placeholder:"再次输入密码",value:s.confirmPassword,onChange:a=>c({...s,confirmPassword:a.target.value}),disabled:r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"invitation-code",children:"邀请码（可选）"}),e.jsx(n,{id:"invitation-code",type:"text",placeholder:"如有邀请码请输入",value:s.invitationCode,onChange:a=>c({...s,invitationCode:a.target.value}),disabled:r})]}),e.jsxs(j,{type:"submit",className:"w-full hover-glow",disabled:r,children:[r&&e.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"注册"]})]})})]})})]})]})}export{Z as default};
