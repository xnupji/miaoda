import{c as _,u as L,r as o,j as s,U as h,B as j,b as H,t as N}from"./index-ziWed5QJ.js";import{C as t,b as r,c,a as i,d as u}from"./card-DwmZRHiX.js";import{L as g,I as p}from"./label-CXqH5594.js";import{T as P,a as B,b as v,c as n,d as M,e as l}from"./table-BL6Da_e1.js";import{b as D}from"./api-BlmA4nJt.js";import{C as b}from"./copy-o2d-vGNE.js";import{L as E}from"./loader-circle-CXjkWSfc.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],S=_("gift",R);function q(){const{profile:e}=L(),[d,f]=o.useState([]),[y,x]=o.useState(!0),m=`${window.location.origin}/miaoda/login?code=${e==null?void 0:e.invitation_code}`;o.useEffect(()=>{w()},[]);const w=async()=>{x(!0);const a=await D();f(a),x(!1)},C=()=>{navigator.clipboard.writeText((e==null?void 0:e.invitation_code)||""),N.success("邀请码已复制到剪贴板")},T=()=>{navigator.clipboard.writeText(m),N.success("邀请链接已复制到剪贴板")},k=d.reduce((a,I)=>a+I.reward_amount,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold gradient-text",children:"邀请好友"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"邀请好友注册，双方都能获得奖励"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(t,{className:"glow-border",children:[s.jsx(r,{className:"pb-2",children:s.jsxs(c,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(h,{className:"w-4 h-4"}),"邀请人数"]})}),s.jsx(i,{children:s.jsx("div",{className:"text-2xl font-bold",children:(e==null?void 0:e.total_invites)||0})})]}),s.jsxs(t,{className:"glow-border",children:[s.jsx(r,{className:"pb-2",children:s.jsxs(c,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(S,{className:"w-4 h-4"}),"累计奖励"]})}),s.jsx(i,{children:s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[k.toFixed(2)," HTP"]})})]}),s.jsxs(t,{className:"glow-border",children:[s.jsx(r,{className:"pb-2",children:s.jsx(c,{className:"text-sm font-medium",children:"单次奖励"})}),s.jsx(i,{children:s.jsx("div",{className:"text-2xl font-bold",children:"10 HTP"})})]})]}),s.jsxs(t,{className:"glow-border-strong",children:[s.jsxs(r,{children:[s.jsx(c,{children:"我的邀请码"}),s.jsx(u,{children:"分享您的邀请码或链接给好友"})]}),s.jsxs(i,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{children:"邀请码"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(p,{value:(e==null?void 0:e.invitation_code)||"",readOnly:!0,className:"font-mono text-lg"}),s.jsxs(j,{onClick:C,variant:"outline",className:"shrink-0",children:[s.jsx(b,{className:"w-4 h-4 mr-2"}),"复制"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(g,{children:"邀请链接"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(p,{value:m,readOnly:!0,className:"font-mono"}),s.jsxs(j,{onClick:T,variant:"outline",className:"shrink-0",children:[s.jsx(b,{className:"w-4 h-4 mr-2"}),"复制"]})]})]}),s.jsxs("div",{className:"p-4 rounded-lg bg-accent/50 border border-border",children:[s.jsx("h4",{className:"font-medium mb-2",children:"邀请规则"}),s.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsx("li",{children:"• 好友使用您的邀请码注册，您将获得 10 HTP 奖励"}),s.jsx("li",{children:"• 奖励将自动发放到您的账户"}),s.jsx("li",{children:"• 邀请人数无上限，多邀多得"})]})]})]})]}),s.jsxs(t,{children:[s.jsxs(r,{children:[s.jsx(c,{children:"邀请记录"}),s.jsx(u,{children:"查看您邀请的所有用户"})]}),s.jsx(i,{children:y?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(E,{className:"w-8 h-8 animate-spin text-primary"})}):d.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(h,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"暂无邀请记录"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"分享您的邀请码开始赚取奖励"})]}):s.jsx("div",{className:"rounded-md border",children:s.jsxs(P,{children:[s.jsx(B,{children:s.jsxs(v,{children:[s.jsx(n,{children:"邀请时间"}),s.jsx(n,{children:"用户ID"}),s.jsx(n,{className:"text-right",children:"奖励 (HTP)"}),s.jsx(n,{className:"text-right",children:"状态"})]})}),s.jsx(M,{children:d.map(a=>s.jsxs(v,{children:[s.jsx(l,{children:new Date(a.created_at).toLocaleString("zh-CN")}),s.jsxs(l,{className:"font-mono text-sm",children:[a.invitee_id.slice(0,8),"..."]}),s.jsxs(l,{className:"text-right font-bold text-primary",children:["+",a.reward_amount.toFixed(2)]}),s.jsx(l,{className:"text-right",children:s.jsx(H,{variant:"secondary",className:"bg-green-500/10 text-green-500",children:"已发放"})})]},a.id))})]})})})]})]})}export{q as default};
