# Supabase 认证配置指南 (解决登录/注册问题)

为了确保您的应用能够正常进行用户注册和登录，请务必按照以下步骤在 Supabase 后台进行配置。

## ⚠️ 关键提示

大多数“注册后无法登录”或“注册无反应”的问题，都是因为 **Email Provider 未启用** 或 **邮箱验证未关闭** 导致的。

## 🛠️ 配置步骤

### 第一步：进入认证设置

1. 登录您的 [Supabase Dashboard](https://supabase.com/dashboard)。
2. 选择您的项目。
3. 在左侧菜单栏中，点击 **Authentication** (图标通常是一个指纹或锁)。
4. 在左侧二级菜单的 **CONFIGURATION** 分组下，点击 **Sign In / Providers**。

### 第二步：配置 Email Provider (核心步骤)

1. 在 Providers 列表中，找到 **Email** 并点击它以展开设置。
2. **启用服务**：确保 **Enable Email provider** 开关处于 **开启 (绿色)** 状态。
   - *如果它是灰色的，请务必打开它。*
3. **关闭邮箱验证**：找到 **Confirm email** 选项，将其设置为 **关闭 (灰色)**。
   - *原因：如果您没有配置自定义 SMTP 邮件服务器，用户将无法收到验证邮件。关闭此选项可让用户注册后直接登录，无需验证。*
4. **保存设置 (最容易被忽略的一步！)**：
   - 更改上述设置后，务必点击右下角或设置面板底部的 **Save** 按钮。
   - *注意：如果按钮是绿色的，说明有未保存的更改；如果是灰色的，说明已保存。*

### 第三步：清理旧数据 (推荐)

如果您之前尝试注册过账号但失败了，建议删除这些“半成品”账号，以免造成干扰：

1. 点击左侧菜单的 **Authentication** -> **Users**。
2. 勾选之前注册失败的邮箱地址。
3. 点击 **Delete user** 删除它们。

## ✅ 验证测试

完成上述设置后：

1. 回到您的应用注册页面。
2. 使用一个**新的**邮箱地址进行注册。
3. 注册成功后，系统应自动跳转或允许您直接登录，而不会提示“Email not confirmed”。

---

## 常见问题排查

- **Q: 为什么我改了设置还是提示 "Email not confirmed"?**
  - A: 可以在 Supabase 的 **Authentication** -> **Users** 列表中查看该用户的状态。如果 `Last Sign In` 是空的且没有 `Verified` 标记，说明该账号是在您修改设置**之前**创建的。请删除该账号重新注册。

- **Q: 注册时转圈然后没反应？**
  - A: 请检查浏览器的控制台 (F12 -> Console)，如果有红色报错，请截图反馈。通常这与网络连接或 Supabase 服务状态有关。
