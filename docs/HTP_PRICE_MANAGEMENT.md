# HTP价格管理功能说明

## 功能概述

管理员可以在管理后台的"开发者设置"标签页中管理HTP代币的显示价格，支持两种模式：

### 1. 自动计算模式（默认）
- 开盘价：$0.01
- 每日递增：$0.03
- 计算公式：当前价格 = 0.01 + (天数 × 0.03)
- 起始日期：2025-01-01

### 2. 手动设置模式
- 管理员可以设置固定的HTP价格
- 设置后立即生效，影响所有用户看到的价格
- 适用于根据市场需求灵活调整价格

## 使用方法

### 访问路径
1. 使用管理员账号登录系统
2. 点击左侧导航栏的"管理后台"
3. 切换到"开发者设置"标签页
4. 找到"HTP价格管理"卡片

### 切换价格模式

#### 切换到自动模式
1. 点击"自动计算"按钮
2. 系统将根据公式自动计算价格
3. 价格每天自动递增$0.03

#### 切换到手动模式
1. 点击"手动设置"按钮
2. 在"设置新价格"输入框中输入价格（美元）
3. 点击"更新HTP价格"按钮
4. 价格立即生效

### 查看当前价格
- 在"当前HTP价格"区域可以看到实时价格
- 价格显示格式：$0.0000（保留4位小数）

## 价格显示位置

HTP价格会在以下位置显示：
1. **仪表盘页面**：统计卡片中的"HTP价格"卡片
2. **所有用户界面**：所有用户看到的价格都是统一的

## 技术实现

### 数据库表
- 表名：`system_settings`
- 相关设置：
  - `htp_price_mode`：价格模式（auto/manual）
  - `htp_price`：手动设置的价格值

### API函数
- `getSystemSetting(key)`：获取系统设置
- `updateSystemSetting(key, value)`：更新系统设置
- `getHTPPrice()`：获取当前HTP价格（自动判断模式）

### 权限控制
- 只有管理员（role='admin'）可以修改价格设置
- 所有用户都可以查看当前价格

## 使用场景

### 场景1：平台初期使用自动模式
- 保持默认的自动计算模式
- 价格稳定增长，符合预期

### 场景2：市场波动需要调整
1. 切换到手动模式
2. 根据市场情况设置合适的价格
3. 例如：设置为 $0.50

### 场景3：恢复自动增长
1. 切换回自动模式
2. 系统自动恢复按天数计算价格

## 注意事项

1. **价格精度**：支持最多4位小数
2. **最小价格**：必须大于0
3. **立即生效**：修改后所有用户立即看到新价格
4. **模式切换**：可以随时在自动和手动模式之间切换
5. **历史记录**：系统会记录每次修改的时间和操作人

## 示例操作

### 示例1：设置固定价格$1.00
```
1. 进入管理后台 → 开发者设置
2. 点击"手动设置"按钮
3. 在输入框中输入：1.00
4. 点击"更新HTP价格"
5. 确认当前价格显示为：$1.0000
```

### 示例2：恢复自动计算
```
1. 进入管理后台 → 开发者设置
2. 点击"自动计算"按钮
3. 系统自动计算当前价格
4. 价格每天自动递增$0.03
```

## 常见问题

### Q: 切换模式后价格会立即改变吗？
A: 是的，切换模式后价格立即生效，所有用户看到的价格都会更新。

### Q: 手动设置的价格会随时间变化吗？
A: 不会，手动模式下价格保持固定，直到管理员再次修改。

### Q: 自动模式下可以修改起始价格吗？
A: 起始价格和递增值是固定的，如需调整请使用手动模式。

### Q: 价格修改会影响用户已有的HTP余额吗？
A: 不会，价格修改只影响显示的价格，不影响用户的HTP余额数量。

### Q: 可以设置负数或零吗？
A: 不可以，价格必须大于0。

---

**最后更新**：2025-12-28
**功能版本**：v1.0
